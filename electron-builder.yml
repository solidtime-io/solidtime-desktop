appId: io.solidtime.desktop
productName: solidtime
directories:
    buildResources: build
files:
    - '!**/.vscode/*'
    - '!src/*'
    - '!electron.vite.config.{js,ts,mjs,cjs}'
    - '!{.eslintignore,.eslintrc.cjs,.prettierignore,.prettierrc.yaml,dev-app-update.yml,CHANGELOG.md,README.md}'
    - '!{.env,.env.*,.npmrc,pnpm-lock.yaml}'
    - '!{tsconfig.json,tsconfig.node.json,tsconfig.web.json}'
asarUnpack:
    - resources/**
    - node_modules/@miniben90/**
    - node_modules/better-sqlite3/**
extraResources:
    - from: drizzle
      to: drizzle
    - from: build/vc_redist.arm64.exe
      to: vc_redist.arm64.exe
      filter:
          - '**/*'
protocols:
    name: solidtime
    schemes:
        - solidtime
win:
    executableName: solidtime
    target:
        - target: nsis
          arch:
              - x64
              - arm64
nsis:
    include: build/installer.nsh
    artifactName: ${name}-setup-${arch}.${ext}
    shortcutName: ${productName}
    uninstallDisplayName: ${productName}
    createDesktopShortcut: always
mac:
    entitlementsInherit: build/entitlements.mac.plist
    target:
        target: default
        arch:
            - x64
            - arm64
    extendInfo:
        - NSCameraUsageDescription: Application requests access to the device's camera.
        - NSMicrophoneUsageDescription: Application requests access to the device's microphone.
        - NSDocumentsFolderUsageDescription: Application requests access to the user's Documents folder.
        - NSDownloadsFolderUsageDescription: Application requests access to the user's Downloads folder.
        - NSScreenCaptureUsageDescription: Application requests access to screen recording to track window activity for time tracking purposes.
    notarize: true
dmg:
    artifactName: ${name}-${arch}.${ext}
linux:
    artifactName: ${name}-${arch}.${ext}
    icon: build/icon.icns
    executableName: solidtime
    target:
        - target: deb
          arch:
              - x64
              - arm64
        - target: snap
          arch:
              - x64
              - arm64
        - target: tar.gz
          arch:
              - x64
              - arm64
        - target: rpm
          arch:
              - x64
              - arm64
    desktop:
        entry:
            Name: solidtime
            MimeType: x-scheme-handler/solidtime
    maintainer: solidtime.io
    category: Utility
    mimeTypes:
        - x-scheme-handler/solidtime
rpm:
  fpm:
    - --rpm-rpmbuild-define
    - _build_id_links none
appImage:
    artifactName: ${name}.${ext}
npmRebuild: true
publish:
    provider: github
